1、使用一个血管分割模型，对已有的cf-fa图像对提取血管分割图
2、然后分别训练两个diffusion模型，一个按血管分割图生成cf图、一个按血管分割图生成fa图。最后训练出来的生成模型具有使用血管分割图生成成对的cf-fa图像对的能力。然后生成的cf和fa图除了血管结构以外其他东西都没有任何关联性
3、现在我们有一套包含cf,fa,seg(cf和fa共享的血管分割图，因为cf-fa都是基于这个分割图生成的)的生成数据集，在使用生成数据集训练配准模型（如Loftr，Lightglue）前，先随机生成一个形变矩阵并对fa和seg应用，然后得到fa_defomed和seg_deformed，然后对(cf,fa_defomed)这对即将输入配准模型的fix和moving图像进行强烈的域随机化：添加噪声、加入少量横竖黑色条纹损坏数据、不均匀地加入高斯噪声（模拟光照不均匀在图像上产生的暗色位置）、以及2倍下采样、图像反色、对比度随机增强/减弱、对圆形视场（FOV）黑边进行破坏等方式，得到(cf_fix,fa_moving)并输入配准模型预测出一个/phi。将配准模型预测的/phi应用在seg_deformed上，得到seg_pred 。最后配准模型的训练、验证评估loss都统一采用Loss(seg,seg_pred)来对模型进行监督。